(()=>{"use strict";class t{constructor(t){this.length=t,this.timesHit=0,this.sunk=!1}hit(){this.timesHit+=1,this.isSunk()}isSunk(){this.length===this.timesHit&&(this.sunk=!0)}}class o{constructor(t){this.size=t,this.board=[],this.fleet=[]}createBoard(){for(let t=0;t<this.size;t++){let o=[];this.board.push(o);for(let o=0;o<this.size;o++)this.board[t][o]=""}return this.board}makeCoordinates(t){let o=!1;for(;!o;){const e=["up","right"],r=Math.floor(Math.random()*this.size),s=Math.floor(Math.random()*this.size),a=e[Math.floor(Math.random()*e.length)];if(o=this.tryPlace(r,s,t,a),o)return this.placeShip(r,s,t,a),[r,s,t,a]}}tryPlace(t,o,e,r){let s=!1;if("up"===r){for(let r=0;r<e;r++)if(t-r<0||"object"==typeof this.board[t-r][o])return s;return s=!0,s}if("right"===r){for(let r=0;r<e;r++)if(o+r>=this.size||"object"==typeof this.board[t][o+r])return s;return s=!0,s}}placeShip(o,e,r,s){let a=new t(r);if("up"===s)for(let t=o;t>o-r;t--)this.board[t][e]=a;else if("right"===s)for(let t=e;t<e+r;t++)this.board[o][t]=a;return this.fleet.push(a),a}receiveAttack(t,o){return"object"==typeof this.board[t][o]?this.board[t][o].hit():this.board[t][o]="hit"}allSunk(){for(let t of this.fleet)if(!1===t.sunk)return!1;return!0}}class e{constructor(t,o){this.name=t,this.board=o,this.shots=[]}makeShot(){if("Computer"!==this.name)return[prompt("choose x"),prompt("choose y")];let t=!1;for(;!t;)if("Computer"===this.name){const o=Math.floor(Math.random()*this.board.size),e=Math.floor(Math.random()*this.board.size);if(!this.shots.includes([o,e]))return this.shots.push([o,e]),t=!0,[o,e]}}}const r=new e("Tony",new o(10));r.board.createBoard(),r.board.makeCoordinates(4),r.board.makeCoordinates(3);const s=new e("Computer",new o(10));s.board.createBoard(),s.board.makeCoordinates(4),s.board.makeCoordinates(3),console.log(r.board.board),console.log(s.board.board),function(){let t="player";for(;!0!==r.board.allSunk()&&!0!==s.board.allSunk();){if(console.log(s.board.allSunk()),"player"===t){let t=r.makeShot();s.board.receiveAttack(t[0],t[1])}else if("computer"===t){let t=s.makeShot();r.board.receiveAttack(t[0],t[1])}t="player"===t?"computer":"player",console.log(r.board.board),console.log(s.board.board)}!0!==r.board.allSunk()?!0!==s.board.allSunk()||console.log("Player wins!"):console.log("Computer wins!")}()})();