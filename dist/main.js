(()=>{"use strict";class o{constructor(o){this.length=o,this.timesHit=0,this.sunk=!1}hit(){this.timesHit+=1,this.isSunk()}isSunk(){this.length===this.timesHit&&(this.sunk=!0)}}class t{constructor(o){this.size=o,this.board=[],this.fleet=[]}createBoard(){for(let o=0;o<this.size;o++){let t=[];this.board.push(t);for(let t=0;t<this.size;t++)this.board[o][t]=""}return this.board}makeCoordinates(o){let t=!1;for(;!t;){const e=["up","right"],r=Math.floor(Math.random()*this.size),a=Math.floor(Math.random()*this.size),s=e[Math.floor(Math.random()*e.length)];if(t=this.tryPlace(r,a,o,s),t)return this.placeShip(r,a,o,s),[r,a,o,s]}}tryPlace(o,t,e,r){let a=!1;if("up"===r){for(let r=0;r<e;r++)if(o-r<0||"object"==typeof this.board[o-r][t])return a;return a=!0,a}if("right"===r){for(let r=0;r<e;r++)if(t+r>=this.size||"object"==typeof this.board[o][t+r])return a;return a=!0,a}}placeShip(t,e,r,a){let s=new o(r);if("up"===a)for(let o=t;o>t-r;o--)this.board[o][e]=s;else if("right"===a)for(let o=e;o<e+r;o++)this.board[t][o]=s;return this.fleet.push(s),s}receiveAttack(o,t){return"object"==typeof this.board[o][t]?this.board[o][t].hit():this.board[o][t]="hit"}allSunk(){for(let o of this.fleet)if(!1===o.sunk)return!1;return!0}}class e{constructor(o,t){this.name=o,this.board=t,this.shots=[]}makeShot(){if("Computer"!==this.name)return[prompt("choose x"),prompt("choose y")];let o=!1;for(;!o;)if("Computer"===this.name){const t=Math.floor(Math.random()*this.board.size),e=Math.floor(Math.random()*this.board.size);if(!this.shots.includes([t,e]))return this.shots.push([t,e]),o=!0,[t,e]}}}const r=new e("Tony",new t(10));r.board.createBoard(),r.board.makeCoordinates(4),r.board.makeCoordinates(3),r.board.makeCoordinates(3),r.board.makeCoordinates(2),r.board.makeCoordinates(2),r.board.makeCoordinates(2),r.board.makeCoordinates(1),r.board.makeCoordinates(1),r.board.makeCoordinates(1),r.board.makeCoordinates(1);const a=new e("Computer",new t(10));a.board.createBoard(),a.board.makeCoordinates(4),a.board.makeCoordinates(3),a.board.makeCoordinates(3),a.board.makeCoordinates(2),a.board.makeCoordinates(2),a.board.makeCoordinates(2),a.board.makeCoordinates(1),a.board.makeCoordinates(1),a.board.makeCoordinates(1),a.board.makeCoordinates(1),console.log(r.board.board),console.log(a.board.board),function(){let o="player";for(;!0!==r.board.allSunk()||!0!==a.board.allSunk();){if("player"===o){let o=r.makeShot();a.board.receiveAttack(o[0],o[1])}else if("computer"===o){let o=a.makeShot();r.board.receiveAttack(o[0],o[1])}o="player"===o?"computer":"player"}console.log(r.board.board),console.log(a.board.board),!0===r.board.allSunk()?console.log("Computer wins!"):console.log("Player wins!")}()})();